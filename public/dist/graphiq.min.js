!function(y){y.fn.graphiq=function(t){var s,d=y.extend({data:{},colorLine:"#d3a2ef",colorDot:"#c3ecf7",colorXGrid:"#7f7f7f",colorYGrid:"#7f7f7f",colorLabels:"#FFFFFF",colorUnits:"#FFFFFF",colorRange:"#FFFFFF",colorFill:"#533c68",colorDotStroke:"#FFFFFF",dotStrokeWeight:0,fillOpacity:.25,rangeOpacity:.5,dotRadius:3,lineWeight:2,yLines:!0,dots:!0,xLines:!0,xLineCount:5,fill:!0,height:100,fluidParent:null},t),g=[],c=d.height+d.dotRadius,p=this,o=d.height/100,f="";for(e in d.data)g.push(d.data[e]);p.append('<div class="graphiq__graph-values"></div><div class="graphiq__graph-layout"><svg class="graphiq__graph" viewBox="0 0 960 '+(d.height+10)+'" shape-rendering="geometricPrecision"><path fill="'+d.colorFill+'" style="opacity: '+d.fillOpacity+'" class="graphiq__fill-path" d="" stroke-width="0" stroke="#000" fill="cyan"/></svg><div class="graphiq__graph-key"></div></div>'),d.fluidParent&&this.closest(".col").css("overflow","auto"),p.addClass("graphiq");var e,u=this.find(".graphiq__graph");for(e in d.data)this.find(".graphiq__graph-key").append('<div class="key" style="color: '+d.colorLabels+'">'+e+"</div>");s=Math.max.apply(Math,g),this.find(".graphiq__graph-values").append('<span style="color: '+d.colorRange+"; opacity: "+d.rangeOpacity+'">'+s+'</span><span style="color: '+d.colorRange+"; opacity: "+d.rangeOpacity+'" >0</span>');var _=p.find(".graphiq__graph-layout").width();function v(t,i){return i/t*100*o}function a(t,o){u.attr({viewBox:"0 0 "+t+" "+(d.height+10),width:t}),function(e,a){for(i=0;i<g.length;i++){h=0==i?d.dotRadius+d.dotStrokeWeight+1:i==g.length-1?-1*(d.dotRadius+d.dotStrokeWeight)-1:0;var r=i==g.length-2?(d.dotRadius+d.dotStrokeWeight)/2:0,n=i+1,l=a*i+h;let t=a*n;console.log(h);var h=c-v(s,g[i]);let o=c-v(s,g[n]);i==g.length-1&&(o=h,t=l),f+=" L "+l+" "+h,i==g.length-1&&d.fill&&function(t){p.find(".graphiq__fill-path").attr("d","M  "+(4+d.dotStrokeWeight)+" "+(d.height+5+d.dotStrokeWeight)+t+" L "+(_-d.dotRadius-d.dotStrokeWeight)+" "+(d.height+5+d.dotStrokeWeight))}(f),e?(d.yLines&&y(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({class:"graphiq__y-division",x1:l,y1:h,x2:l,y2:d.height+5,stroke:d.colorYGrid,"stroke-dasharray":"5 6","stroke-width":1}).prependTo(u),y(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({class:"graphiq__line",x1:l,y1:h,x2:t-r,y2:o+d.dotStrokeWeight/2,stroke:d.colorLine,"stroke-width":d.lineWeight,"vector-effect":"non-scaling-stroke"}).appendTo(u),y(document.createElementNS("http://www.w3.org/2000/svg","circle")).attr({class:"graphiq__graph-dot",cx:l,cy:h+d.dotStrokeWeight/2,r:d.dots?d.dotRadius:0,fill:d.colorDot,stroke:d.colorDotStroke,"stroke-width":d.dotStrokeWeight,"data-value":g[i],"vector-effect":"non-scaling-stroke"}).appendTo(u)):(p.find(".graphiq__graph-dot").eq(i).attr({cx:l}),p.find(".graphiq__line").eq(i).attr({x1:l,x2:t-r}),p.find(".graphiq__y-division").eq(g.length-i-1).attr({x1:l,x2:l}),p.find(".graphiq__x-line").each(function(){y(this).attr({x2:_})}))}}(o,t/(g.length-1))}d.xLines&&function(t){var o=100/(d.xLineCount-1);for(i=0;i<d.xLineCount;i++)y(document.createElementNS("http://www.w3.org/2000/svg","line")).attr({class:"graphiq__x-line",y1:o*i+(d.dotRadius+d.dotStrokeWeight),x2:t,y2:o*i+(d.dotRadius+d.dotStrokeWeight),stroke:d.colorXGrid,"stroke-width":1}).prependTo(u)}(_),a(_,!0),y(window).on("resize",function(){f="",a(_=p.find(".graphiq__graph-layout").width(),!1)}),p.hover(function(){y(this).find(".graphiq__graph-dot").each(function(t){y("body").append('<span style="color: '+d.colorUnits+'" class="graphiq__value-dialog value-'+t+'">'+y(this).attr("data-value")+"</span>"),y(".value-"+t).css({top:y(this).position().top-20,left:y(this).position().left-y(".value-"+t).outerWidth()/2+3})})},function(){y(".graphiq__value-dialog").remove()})}}(jQuery);
